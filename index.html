<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Zefoy 2 - Instagram, TikTok, Twitter フォロワー無料増加。ポイント制で安全・簡単。ログイン不要。">
    <meta name="keywords" content="Instagram フォロワー, TikTok フォロワー, Twitter フォロワー, 無料">
    <title>Zefoy 2 - Free Social Media Growth</title>
    <script src="https://gumroad.com/js/gumroad.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; }
        body { background: white; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; color: #333; }
        .navbar { background: white; border-bottom: 1px solid #e0e0e0; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 22px; font-weight: 700; background: linear-gradient(135deg, #ff6b6b, #ff8787); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .balance { background: linear-gradient(135deg, #ff6b6b, #ff8787); color: white; padding: 10px 20px; border-radius: 20px; font-weight: 600; font-size: 13px; }
        .btn-buy { background: #ff6b6b; color: white; border: none; padding: 10px 20px; border-radius: 6px; font-weight: 600; cursor: pointer; }
        .container { max-width: 1200px; margin: 30px auto; padding: 0 20px; }
        .title { font-size: 28px; font-weight: 700; margin-bottom: 30px; text-align: center; }
        .tabs { display: flex; gap: 15px; margin-bottom: 30px; border-bottom: 2px solid #e0e0e0; }
        .tab { background: none; border: none; padding: 15px 0; font-size: 15px; font-weight: 600; color: #999; cursor: pointer; border-bottom: 3px solid transparent; transition: all 0.3s; white-space: nowrap; }
        .tab.active { color: #ff6b6b; border-bottom-color: #ff6b6b; }
        .content { display: none; }
        .content.active { display: block; }
        .free-box { background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(255, 135, 135, 0.1)); border: 2px solid #ff6b6b; border-radius: 12px; padding: 25px; margin-bottom: 30px; text-align: center; }
        .free-badge { display: inline-block; background: #ff6b6b; color: white; padding: 6px 12px; border-radius: 20px; font-size: 11px; font-weight: 600; margin-bottom: 15px; }
        .free-title { font-size: 20px; font-weight: 700; margin-bottom: 8px; }
        .free-desc { font-size: 13px; color: #666; margin-bottom: 15px; }
        .url-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px; margin-bottom: 10px; }
        .btn { background: linear-gradient(135deg, #ff6b6b, #ff8787); color: white; border: none; padding: 11px 22px; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 13px; width: 100%; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(255, 107, 107, 0.4); }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .card { background: white; border: 1px solid #e0e0e0; border-radius: 10px; padding: 20px; transition: all 0.3s; }
        .card:hover { border-color: #ff6b6b; box-shadow: 0 6px 20px rgba(255, 107, 107, 0.12); transform: translateY(-3px); }
        .card-title { font-size: 16px; font-weight: 700; margin-bottom: 8px; }
        .card-price { font-size: 22px; font-weight: 800; background: linear-gradient(135deg, #ff6b6b, #ff8787); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 12px; }
        .qty-input { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 6px; font-size: 12px; margin-bottom: 8px; }
        .url-input-card { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 6px; font-size: 12px; margin-bottom: 10px; }
        .points-info { background: #f0f4ff; padding: 10px; border-radius: 6px; margin-bottom: 10px; font-size: 11px; }
        .modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.7); z-index: 1000; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: white; border-radius: 12px; padding: 30px; max-width: 500px; width: 90%; }
        .modal-title { font-size: 20px; font-weight: 700; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
        .close-btn { background: none; border: none; font-size: 24px; cursor: pointer; color: #999; }
        .packages { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 10px; margin-bottom: 20px; }
        .pkg { background: white; border: 2px solid #e0e0e0; padding: 15px; border-radius: 8px; text-align: center; cursor: pointer; transition: all 0.3s; }
        .pkg:hover { border-color: #ff6b6b; background: #f0f4ff; }
        .pkg-price { font-size: 18px; font-weight: 700; color: #ff6b6b; margin-bottom: 5px; }
        .pkg-points { font-size: 12px; color: #666; }
        .gumroad-button { display: block; background: linear-gradient(135deg, #ff6b6b, #ff8787) !important; color: white !important; padding: 10px 15px !important; border-radius: 6px !important; font-weight: 600 !important; text-align: center !important; text-decoration: none !important; margin: 10px 0 !important; font-size: 12px !important; }
        .timer { font-size: 11px; color: #999; margin-top: 10px; }
        .ad-box { background: #f0f0f0; height: 200px; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; }
        .timer-display { font-size: 48px; font-weight: 800; color: #ff6b6b; text-align: center; }
        footer { background: white; border-top: 1px solid #e0e0e0; padding: 20px; text-align: center; font-size: 11px; color: #999; margin-top: 40px; }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="logo">Zefoy 2</div>
        <div style="display: flex; gap: 15px; align-items: center;">
            <div class="balance">Points: <span id="points">0</span></div>
            <button class="btn-buy" onclick="showPointsModal()">Buy Points</button>
        </div>
    </div>

    <!-- Banner Ad 1 -->
    <script>
        atOptions = {
            'key': 'd9f48dbe7f2332752fb66f0c3b59add2',
            'format': 'iframe',
            'height': 60,
            'width': 468,
            'params': {}
        };
    </script>
    <script src="https://conscientiouscabbageadrift.com/d9f48dbe7f2332752fb66f0c3b59add2/invoke.js"></script>

    <!-- Social Bar -->
    <script src="https://conscientiouscabbageadrift.com/0f/9e/d5/0f9ed5fbb35c6a9df48972960089c294.js"></script>

    <div class="container">
        <div class="title">Social Media Growth</div>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('instagram')">Instagram</button>
            <button class="tab" onclick="switchTab('tiktok')">TikTok</button>
            <button class="tab" onclick="switchTab('twitter')">Twitter</button>
        </div>

        <div id="instagram" class="content active">
            <div class="free-box">
                <div class="free-badge">FREE - EVERY 12 HOURS</div>
                <div class="free-title">Get 10 Free Followers</div>
                <div class="free-desc">Watch a 15-second ad</div>
                <input type="text" class="url-input" placeholder="https://instagram.com/username" id="ig-url">
                <button class="btn" onclick="showAdModal('instagram')">Watch Ad</button>
                <div class="timer"><span id="ig-timer">Available now</span></div>
            </div>
            <div class="grid" id="ig-grid"></div>
        </div>

        <div id="tiktok" class="content">
            <div class="grid" id="tk-grid"></div>
        </div>

        <div id="twitter" class="content">
            <div class="grid" id="tw-grid"></div>
        </div>
    </div>

    <div class="modal" id="pointsModal">
        <div class="modal-content">
            <div class="modal-title">
                Buy Points
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="packages" id="pkgGrid"></div>
        </div>
    </div>

    <div class="modal" id="adModal">
        <div class="modal-content">
            <div class="modal-title">
                Advertisement
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="ad-box">
                <div class="timer-display" id="adTimer">15</div>
            </div>
            <button class="btn" id="claimBtn" disabled>Wait... 15s</button>
        </div>
    </div>

    <footer>
        Zefoy 2 - Free Social Media Growth | Points-Based | No Login Required
    </footer>

    <script>
        let points = parseInt(localStorage.getItem('zefoy_points') || '0');
        let services = {};
        
        document.getElementById('points').textContent = points;
        
        // Check if returning from Gumroad
        const urlParams = new URLSearchParams(window.location.search);
        const gumroadSuccess = urlParams.get('gumroad_success');
        const productId = urlParams.get('product_id');
        
        if (gumroadSuccess && productId) {
            // Extract points from product_id
            const match = productId.match(/points-(\d+)/);
            if (match) {
                const packageId = parseInt(match[1]);
                const pointsMap = {
                    1: 100,
                    2: 1000,
                    3: 5000,
                    4: 10000,
                    5: 25000
                };
                
                const earnedPoints = pointsMap[packageId];
                if (earnedPoints) {
                    points += earnedPoints;
                    localStorage.setItem('zefoy_points', points);
                    document.getElementById('points').textContent = points;
                    alert(`✓ ${earnedPoints} points added to your account!`);
                    
                    // Clean URL
                    window.history.replaceState({}, document.title, window.location.pathname);
                }
            }
        }
        
        fetch('/api/services').then(r => r.json()).then(data => {
            services = data;
            renderServices();
        });
        
        fetch('/api/points/packages').then(r => r.json()).then(data => {
            renderPackages(data.packages);
        });

        function renderServices() {
            const platforms = { instagram: 'ig', tiktok: 'tk', twitter: 'tw' };
            for (const [p, prefix] of Object.entries(platforms)) {
                const grid = document.getElementById(`${prefix}-grid`);
                if (!grid) continue;
                grid.innerHTML = '';
                
                for (const [key, svc] of Object.entries(services[p] || {})) {
                    if (svc.free) continue;
                    
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.innerHTML = `
                        <div class="card-title">${svc.name}</div>
                        <div class="card-price">$${svc.price.toFixed(4)}</div>
                        <input type="number" class="qty-input" min="10" max="${svc.limit}" value="100" id="qty-${p}-${key}">
                        <input type="text" class="url-input-card" id="url-${p}-${key}" placeholder="URL">
                        <div class="points-info">Points: <span id="cost-${p}-${key}">-</span></div>
                        <button class="btn" onclick="purchase('${p}', '${key}')">Buy</button>
                    `;
                    grid.appendChild(card);
                }
            }
        }

        function renderPackages(packages) {
            const grid = document.getElementById('pkgGrid');
            grid.innerHTML = '';
            
            const baseUrl = window.location.origin + window.location.pathname;
            
            const gumroadUrls = {
                1: `https://robachan.gumroad.com/l/100-point-1?redirect_url=${encodeURIComponent(baseUrl + '?gumroad_success=1&product_id=points-1')}`,
                2: `https://robachan.gumroad.com/l/1000-points-10?redirect_url=${encodeURIComponent(baseUrl + '?gumroad_success=1&product_id=points-2')}`,
                3: `https://robachan.gumroad.com/l/5000-points-45?redirect_url=${encodeURIComponent(baseUrl + '?gumroad_success=1&product_id=points-3')}`,
                4: `https://robachan.gumroad.com/l/10000-points-85?redirect_url=${encodeURIComponent(baseUrl + '?gumroad_success=1&product_id=points-4')}`,
                5: `https://robachan.gumroad.com/l/25000-points-200?redirect_url=${encodeURIComponent(baseUrl + '?gumroad_success=1&product_id=points-5')}`
            };
            
            for (const pkg of packages) {
                const box = document.createElement('div');
                box.className = 'pkg';
                const url = gumroadUrls[pkg.id] || '#';
                box.innerHTML = `
                    <div class="pkg-price">$${pkg.price}</div>
                    <div class="pkg-points">${pkg.points.toLocaleString()}pt</div>
                    <a class="gumroad-button" href="${url}" target="_blank">Buy</a>
                `;
                grid.appendChild(box);
            }
        }

        function switchTab(tab) {
            document.querySelectorAll('.content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
            document.getElementById(tab).classList.add('active');
            event.target.classList.add('active');
        }

        function showPointsModal() {
            document.getElementById('pointsModal').classList.add('active');
        }

        function showAdModal(platform) {
            const url = document.getElementById(`${platform}-url`).value;
            if (!url) { alert('Enter URL'); return; }
            sessionStorage.setItem('adUrl', url);
            sessionStorage.setItem('adPlatform', platform);
            document.getElementById('adModal').classList.add('active');
            startAdTimer();
            
            // Load free follower ads
            setTimeout(() => {
                // Banner Ad 2
                const script1 = document.createElement('script');
                script1.src = 'https://conscientiouscabbageadrift.com/f1/c3/bb/f1c3bb6c97918874b928466e660122f0.js';
                script1.async = true;
                document.body.appendChild(script1);
                
                // Native Ad
                const script2 = document.createElement('script');
                script2.async = true;
                script2.setAttribute('data-cfasync', 'false');
                script2.src = 'https://conscientiouscabbageadrift.com/c6875b62541e72769696c2d1e22bec2e/invoke.js';
                document.body.appendChild(script2);
                
                // Add native ad container
                const container = document.createElement('div');
                container.id = 'container-c6875b62541e72769696c2d1e22bec2e';
                document.body.appendChild(container);
            }, 500);
        }

        function startAdTimer() {
            let s = 15;
            const timer = document.getElementById('adTimer');
            const btn = document.getElementById('claimBtn');
            
            const int = setInterval(() => {
                timer.textContent = s;
                btn.textContent = `Wait... ${s}s`;
                s--;
                if (s < 0) {
                    clearInterval(int);
                    btn.disabled = false;
                    btn.textContent = 'Claim Free Followers';
                }
            }, 1000);
        }

        function closeModal() {
            document.querySelectorAll('.modal').forEach(m => m.classList.remove('active'));
        }

        document.getElementById('claimBtn')?.addEventListener('click', async () => {
            const url = sessionStorage.getItem('adUrl');
            const res = await fetch('/api/boost/free', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ url })
            });
            if (res.ok) {
                alert('✓ 10 free followers claimed!');
                localStorage.setItem('lastFree', Date.now());
                closeModal();
            }
        });

        function purchase(platform, service) {
            let qty = parseInt(document.getElementById(`qty-${platform}-${service}`).value);
            const url = document.getElementById(`url-${platform}-${service}`).value;
            const svc = services[platform]?.[service];
            
            // Max 1000 validation
            if (qty > 1000) qty = 1000;
            
            if (!url) { alert('Enter URL'); return; }
            if (!svc || qty < 10 || qty > 1000) { alert('Quantity: 10-1000'); return; }
            if (qty > svc.limit) { alert(`Service max: ${svc.limit}`); return; }
            
            const costPts = Math.ceil(qty * svc.price * 100);
            if (points < costPts) { alert('Insufficient points'); return; }
            
            fetch('/api/boost/purchase', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ platform, service, url, qty })
            }).then(r => r.json()).then(data => {
                if (data.success) {
                    points -= costPts;
                    localStorage.setItem('zefoy_points', points);
                    document.getElementById('points').textContent = points;
                    alert('✓ Order placed!');
                } else {
                    alert('Error: ' + data.error);
                }
            });
        }

        // Update points cost display
        document.addEventListener('input', (e) => {
            if (e.target.className === 'qty-input') {
                const [, p, k] = e.target.id.match(/qty-(\w+)-(\w+)/) || [];
                let qty = parseInt(e.target.value) || 0;
                const svc = services[p]?.[k];
                
                // Max 1000 limit
                if (qty > 1000) {
                    qty = 1000;
                    e.target.value = 1000;
                }
                
                if (svc) {
                    const cost = Math.ceil(qty * svc.price * 100);
                    const el = document.getElementById(`cost-${p}-${k}`);
                    if (el) el.textContent = cost;
                }
            }
        });

        // Check free timer
        const lastFree = localStorage.getItem('lastFree');
        if (lastFree) {
            const elapsed = Date.now() - parseInt(lastFree);
            const remaining = 12 * 60 * 60 * 1000 - elapsed;
            if (remaining > 0) {
                const h = Math.floor(remaining / 3600000);
                const m = Math.floor((remaining % 3600000) / 60000);
                document.getElementById('ig-timer').textContent = `Available in ${h}h ${m}m`;
            }
        }
    </script>

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Zefoy 2",
        "description": "Free social media growth for Instagram, TikTok, Twitter"
    }
    </script>
</body>
</html>